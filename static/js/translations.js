const translations = {
    ar: {
        'Student Portal': 'بوابة الطلاب',
        'Find summaries for various subjects made by the student leaders.': 'ابحث عن ملخصات المواد المختلفة التي أعدها المشرفين.',
        'Summary Search': 'البحث عن الملخصات',
        'Subject:': 'المادة:',
        'Select a Subject': 'اختر المادة',
        'Chapter:': 'الفصل:',
        'Select a Chapter (Optional)': 'اختر الفصل (اختياري)',
        'Subject Material': 'محتوى المادة',
        'Search for student university code.': 'ابحث عن كود طالب.',
        'Student Lookup': 'البحث عن طالب',
        'Search by National ID': 'البحث برقم القومي',
        'National ID Number:': 'الرقم القومي:',
        'Search': 'بحث',
        'Student Information': 'معلومات الطالب',
        'Name:': 'الاسم:',
        'Code:': 'الكود:',
        'Phase:': 'المرحلة:',
        'Could not find the student. Ensure you are entering the information correctly.': 'لم يتم العثور على الطالب. تأكد من إدخال المعلومات بشكل صحيح.',
        "Error searching for student. Please try again.": "خطأ في البحث عن الطالب. حاول مرة أخرى.",
        // Navigation
        'STUDENT PORTAL': 'بوابة الطلاب',
        'STUDENT LOOKUP': 'البحث عن طالب',
        'ADMIN PORTAL': 'بوابة المسؤول',
        'GROUP LINKS': 'روابط الجروبات',
        'GO HOME': 'الصفحة الرئيسية',
        'SYSTEM STATUS': 'حالة النظام',
        
        // Header
        'Admin Portal': 'بوابة المشرف',
        'Only accessible by student leaders.': 'متاح فقط للمشرفين.',
        
        // Form elements
        'Uploaded Summaries': 'الملخصات المرفوعة',
        'Upload Summary': 'رفع ملخص',
        'Uploader:': 'المستخدم:',
        'Select Uploader': 'اختر المستخدم',
        'Subject:': 'المادة:',
        'Select a Subject': 'اختر المادة',
        'Chapter:': 'الفصل:',
        'Select a Chapter': 'اختر الفصل',
        'Summary File:': 'ملف الملخص:',
        'Upload': 'رفع',
        'Sign in with Google': 'تسجيل الدخول باستخدام جوجل',
        'Signing in...': 'جاري تسجيل الدخول...',
        
        // Messages
        'File uploaded successfully!': 'تم رفع الملف بنجاح!',
        'Please select a non-empty file': 'الرجاء اختيار ملف غير فارغ',
        'Please select an uploader': 'الرجاء اختيار المستخدم',
        'Upload failed:': 'فشل الرفع:',
        'Checking authentication...': 'جاري التحقق من الهوية...',
        'Creating folder structure...': 'جاري إنشاء مجلد...',
        'Uploading file...': 'جاري رفع الملف...',
        'Please sign in': 'الرجاء تسجيل الدخول',
        'To be added': 'سيتم الإضافة',
        
        // Footer translations
        'Made with': 'تم التطوير بـ',
        'by': 'بواسطة',
        'Contributed to by': 'بمساهمة من',
        'and': 'و',

        // Names translations
        'Noor Tantawy': 'نور طنطاوي',
        'Nervana Ebrahim': 'نرفانا ابراهيم',
        'Ahmed Abdulaziz': 'احمد عبدالعزيز',

        // Subject Names
        'Operations Research': 'بحوث العمليات',
        'Digital Logic Design': 'تصميم المنطق الرقمي',
        'Mathematics II': 'الرياضيات II',
        'Discrete Structures': 'التراكيب المحددة',
        'Programming II': 'البرمجة II',
        'Ethics': 'الأخلاقيات',
        'Human Rights': 'حقوق الإنسان',

        // Chapter Names
        'Chapter 1': 'الفصل الأول',
        'Chapter 2': 'الفصل الثاني',
        'Chapter 3': 'الفصل الثالث',
        'Chapter 4': 'الفصل الرابع',
        'Chapter 5': 'الفصل الخامس',
        'Material': 'المحتوى',

        "Select your name": "اختر اسمك",
        "Noor Tantawy": "نور طنطاوي",
        "Nervana Ebrahim": "نيرفانا إبراهيم",
        "Ahmed Abdulaziz": "أحمد عبد العزيز",

        // Loading states
        'Loading summaries...': 'جاري تحميل الملخصات...',
        'Loading Google API...': 'جاري تحميل واجهة برمجة جوجل...',
        'No subject folders found': 'لم يتم العثور على مجلدات المواد',
        'No chapters found': 'لم يتم العثور على فصول',
        'No files uploaded yet': 'لم يتم رفع ملفات بعد',
        'Error loading summaries. Please try again later.': 'خطأ في تحميل الملخصات. يرجى المحاولة مرة أخرى لاحقاً.',
        'Google API not loaded': 'لم يتم تحميل واجهة برمجة جوجل',
        'Please sign in to view summaries': 'يرجى تسجيل الدخول لعرض الملخصات',

        // Upload errors
        'Upload error:': 'خطأ في الرفع:',
        'Subject data not loaded from config.js': 'لم يتم تحميل بيانات المواد من ملف التكوين',
        'Error populating subjects:': 'خطأ في تحميل المواد:',
        'Error creating folder structure:': 'خطأ في إنشاء هيكل المجلدات:',
        'Error uploading file:': 'خطأ في رفع الملف:',
        'Please select all required fields': 'يرجى اختيار جميع الحقول المطلوبة',
        'File upload failed:': 'فشل رفع الملف:',
        'Authentication required': 'مطلوب تسجيل الدخول',
        'Not authenticated': 'لم يتم تسجيل الدخول',
        'Google Drive is taking too long to respond. Please refresh the page.': 'يستغرق Google Drive وقتًا طويلاً للرد. يرجى تحديث الصفحة.',

        // Status page translations
        'System Status': 'حالة النظام',
        'Current status of all portal systems': 'الحالة الحالية لجميع أنظمة البوابة',
        'University API': 'الجامعة API',
        'Fetching student code functioning normally': 'يعمل نظام ايجاد كود الطالب بشكل طبيعي',
        'GitHub Deployment': 'حالة النشر على GitHub',
        'Latest deployment:': 'آخر نشر:',
        'Active': 'نشط',
        'File Upload System': 'نظام رفع الملفات',
        'File uploads functioning normally': 'يعمل نظام رفع الملفات بشكل طبيعي',
        'Google Drive API': 'Google Drive API',
        'Connected and responding': 'متصل ويستجيب',
        'Developer Contact': 'بيانات التواصل مع المطور',
        'System operational': 'النظام يعمل',
        'System offline': 'النظام متوقف',
        '+20 115 296 1437': '1437 296 115 20+',

        // New translations
        'Student Helper': 'مساعد الطالب',
        'Your one-stop platform for academic resources and tools': 'منصتك الشاملة للموارد والأدوات الأكاديمية.',
        'Portal Features': 'مميزات البوابة',
        'Study Materials': 'المواد الدراسية',
        'Access subject summaries and study materials created by student leaders': 'الوصول إلى ملخصات المواد والمواد الدراسية التي أنشأها قادة الطلاب',
        'Student Lookup': 'البحث عن طالب',
        'Find your university student code': 'اوجد كودك الجامعي',
        'Material Upload': 'رفع المواد',
        'Student leaders can upload and manage study materials': 'يمكن لقادة الطلاب رفع وإدارة المواد الدراسية',
        'System Status': 'حالة النظام',
        'Monitor the status of all portal systems and services': 'مراقبة حالة جميع أنظمة وخدمات البوابة',
        'Need Help?': 'تحتاج مساعدة؟',
        'If you encounter any issues or errors while using the portal, please don\'t hesitate to contact us:': 'إذا واجهت أي مشاكل أو أخطاء أثناء استخدام البوابة، لا تتردد في الاتصال بنا:',
        'Contact on WhatsApp': 'تواصل عبر واتساب',
        'Check System Status': 'تحقق من حالة النظام',
        'If you encounter any issues or errors while using the portal, please verify status and contact me after:': 'إذا واجهت أي مشاكل أثناء استخدام البوابة، يرجى التحقق من حالة النظام ثم التواصل معي:',
        'Send an E-mail': 'أرسل بريد إلكتروني',
        'Group Links': 'روابط الجروبات',
        'Access all official student group and community links': 'الوصول إلى جميع روابط مجموعات الطلاب الرسمية',
        'Find group links by selecting the relevant category': 'ابحث عن روابط الجروبات عن طريق اختيار الفئة المناسبة',

        // Category selections
        'Select Category': 'اختر الفئة',
        'Official Links': 'الروابط الرسمية',
        'Section Links': 'روابط السكاشن',
        'Subject Links': 'روابط المواد',
        'Select Group': 'اختر المجموعة',
        'Group A1': 'مجموعة A1',
        'Group A2': 'مجموعة A2', 
        'Group A3': 'مجموعة A3',
        'Group A4': 'مجموعة A4',
        'Group A5': 'مجموعة A5',

        // Official link titles
        'WhatsApp Official Group': 'جروب الواتساب الرسمي',
        'Facebook Official Group': 'جروب الفيسبوك الرسمي',
        'Telegram Groups Folder': 'مجلد جروبات التليجرام',

        // Section labels
        'Section': 'سكشن',

        // Subject selection
        'Select Subject': 'اختر المادة',

        // Teacher names don't need translation
        'Main Group': 'الجروب الرئيسي',
        'Telegram Group': 'جروب التليجرام',

        // Instructor Names
        'Eng. Mahmoud Ibrahim': 'م. محمود إبراهيم',
        'Eng. Esraa Zakaria': 'م. إسراء زكريا',
        'Eng. Mohamed Gamal': 'م. محمد جمال',
        'Eng. Nada Nagy': 'م. ندى ناجي',
        'Eng. Eman Selim': 'م. إيمان سليم',
        'Eng. Yasmina': 'م. ياسمينا',
        'Eng. Ahmed Daoud': 'م. أحمد داود',
        'Eng. Waleed': 'م. وليد',
        'Eng. Dina Atef': 'م. دينا عاطف',
        'Eng. Basma Eldrandaly': 'م. بسمة الدرندلي',
        'Eng. Reham Sheerah': 'م. ريهام شعيرة',
        'Eng. Kholoud Mohsen': 'م. خلود محسن',
        'Eng. Shawky Elgendy': 'م. شوقي الجندي',
        'Eng. Esraa Elgdawy': 'م. إسراء الجداوي',
        'Eng. Ahmed Abdelmonem': 'م. أحمد عبد المنعم'
    },
    en: {
        'Student Portal': 'Student Portal',
        'Find summaries for various subjects made by the student leaders.': 'Find summaries for various subjects made by the student leaders.',
        'Summary Search': 'Summary Search',
        'Subject:': 'Subject:',
        'Select a Subject': 'Select a Subject',
        'Chapter:': 'Chapter:',
        'Select a Chapter (Optional)': 'Select a Chapter (Optional)',
        'Subject Material': 'Subject Material',
        'Search for student university code.': 'Search for student university code.',
        'Student Lookup': 'Student Lookup',
        'Search by National ID': 'Search by National ID',
        'National ID Number:': 'National ID Number:',
        'Search': 'Search',
        'Student Information': 'Student Information',
        'Name:': 'Name:',
        'Code:': 'Code:',
        'Phase:': 'Phase:',
        'Could not find the student. Ensure you are entering the information correctly.': 'Could not find the student. Ensure you are entering the information correctly.',
        "Error searching for student. Please try again.": "Error searching for student. Please try again.",
        // Navigation
        'STUDENT PORTAL': 'STUDENT PORTAL',
        'STUDENT LOOKUP': 'STUDENT LOOKUP',
        'ADMIN PORTAL': 'ADMIN PORTAL',
        'GROUP LINKS': 'GROUP LINKS',
        'SYSTEM STATUS': 'SYSTEM STATUS',
        
        // Header
        'Admin Portal': 'Admin Portal',
        'Only accessible by student leaders.': 'Only accessible by student leaders.',
        
        // Form elements
        'Uploaded Summaries': 'Uploaded Summaries',
        'Upload Summary': 'Upload Summary',
        'Uploader:': 'Uploader:',
        'Select Uploader': 'Select Uploader',
        'Subject:': 'Subject:',
        'Select a Subject': 'Select a Subject',
        'Chapter:': 'Chapter:',
        'Select a Chapter': 'Select a Chapter',
        'Summary File:': 'Summary File:',
        'Upload': 'Upload',
        'Sign in with Google': 'Sign in with Google',
        'Signing in...': 'Signing in...',
        
        // Messages
        'File uploaded successfully!': 'File uploaded successfully!',
        'Please select a non-empty file': 'Please select a non-empty file',
        'Please select an uploader': 'Please select an uploader',
        'Upload failed:': 'Upload failed:',
        'Checking authentication...': 'Checking authentication...',
        'Creating folder structure...': 'Creating folder structure...',
        'Uploading file...': 'Uploading file...',
        'Please sign in': 'Please sign in',
        'To be added': 'To be added',
        
        // Footer translations
        'Made with': 'Made with',
        'by': 'by',
        'Contributed to by': 'Contributed to by',
        'and': 'and',

        // Names translations
        'Noor Tantawy': 'Noor Tantawy',
        'Nervana Ebrahim': 'Nervana Ebrahim',
        'Ahmed Abdulaziz': 'Ahmed Abdulaziz',

        // Subject Names
        'Operations Research': 'Operations Research',
        'Digital Logic Design': 'Digital Logic Design',
        'Mathematics II': 'Mathematics II',
        'Discrete Structures': 'Discrete Structures',
        'Programming II': 'Programming II',
        'Ethics': 'Ethics',
        'Human Rights': 'Human Rights',

        // Chapter Names
        'Chapter 1': 'Chapter 1',
        'Chapter 2': 'Chapter 2',
        'Chapter 3': 'Chapter 3',
        'Chapter 4': 'Chapter 4',
        'Chapter 5': 'Chapter 5',

        "Select your name": "Select your name",
        "Noor Tantawy": "Noor Tantawy",
        "Nervana Ebrahim": "Nervana Ebrahim",
        "Ahmed Abdulaziz": "Ahmed Abdulaziz",

        // Loading states
        'Loading summaries...': 'Loading summaries...',
        'Loading Google API...': 'Loading Google API...',
        'No subject folders found': 'No subject folders found',
        'No chapters found': 'No chapters found',
        'No files uploaded yet': 'No files uploaded yet',
        'Error loading summaries. Please try again later.': 'Error loading summaries. Please try again later.',
        'Google API not loaded': 'Google API not loaded',
        'Please sign in to view summaries': 'Please sign in to view summaries',

        // Upload errors
        'Upload error:': 'Upload error:',
        'Subject data not loaded from config.js': 'Subject data not loaded from config.js',
        'Error populating subjects:': 'Error populating subjects:',
        'Error creating folder structure:': 'Error creating folder structure:',
        'Error uploading file:': 'Error uploading file:',
        'Please select all required fields': 'Please select all required fields',
        'File upload failed:': 'File upload failed:',
        'Authentication required': 'Authentication required',
        'Not authenticated': 'Not authenticated',
        'Google Drive is taking too long to respond. Please refresh the page.': 'Google Drive is taking too long to respond. Please refresh the page.',

        // Status page translations
        'System Status': 'System Status',
        'Current status of all portal systems': 'Current status of all portal systems',
        'University API': 'University API',
        'Fetching student code functioning normally': 'Fetching student code functioning normally',
        'GitHub Deployment': 'GitHub Deployment',
        'Latest deployment:': 'Latest deployment:',
        'Active': 'Active',
        'File Upload System': 'File Upload System',
        'File uploads functioning normally': 'File uploads functioning normally',
        'Google Drive API': 'Google Drive API',
        'Connected and responding': 'Connected and responding',
        'Developer Contact': 'Developer Contact',
        'System operational': 'System operational',
        'System offline': 'System offline',
        '+20 115 296 1437': '+20 115 296 1437',

        // New translations
        'Student Helper': 'مساعد الطالب',
        'Your one-stop platform for academic resources and tools': 'Your one-stop platform for academic resources and tools',
        'Portal Features': 'Portal Features',
        'Study Materials': 'Study Materials',
        'Access subject summaries and study materials created by student leaders': 'Access subject summaries and study materials created by student leaders',
        'Student Lookup': 'Student Lookup',
        'Find your university student code': 'Find your university student code',
        'Material Upload': 'Material Upload',
        'Student leaders can upload and manage study materials': 'Student leaders can upload and manage study materials',
        'Need Help?': 'Need Help?',
        'If you encounter any issues or errors while using the portal, please don\'t hesitate to contact us:': 'If you encounter any issues or errors while using the portal, please don\'t hesitate to contact us:',
        'Contact on WhatsApp': 'Contact on WhatsApp',
        'If you encounter any issues or errors while using the portal, please verify status and contact me after:': 'If you encounter any issues or errors while using the portal, please verify status and contact me after:',
        'Send an E-mail': 'Send an E-mail',
        'Group Links': 'Group Links',
        'Access all official student group and community links': 'Access all official student group and community links',
        'Find group links by selecting the relevant category': 'Find group links by selecting the relevant category',

        // Category selections  
        'Select Category': 'Select Category',
        'Official Links': 'Official Links',
        'Section Links': 'Section Links',
        'Subject Links': 'Subject Links',
        'Select Group': 'Select Group',
        'Group A1': 'Group A1',
        'Group A2': 'Group A2',
        'Group A3': 'Group A3',
        'Group A4': 'Group A4',
        'Group A5': 'Group A5',

        // Official link titles
        'WhatsApp Official Group': 'WhatsApp Official Group',
        'Facebook Official Group': 'Facebook Official Group', 
        'Telegram Groups Folder': 'Telegram Groups Folder',

        // Section labels
        'Section': 'Section',

        // Subject selection
        'Select Subject': 'Select Subject',

        // Teacher prefixes
        'Main Group': 'Main Group',
        'Telegram Group': 'Telegram Group',

        // Instructor Names (kept in English)
        'Eng. Mahmoud Ibrahim': 'Eng. Mahmoud Ibrahim',
        'Eng. Esraa Zakaria': 'Eng. Esraa Zakaria',
        'Eng. Mohamed Gamal': 'Eng. Mohamed Gamal',
        'Eng. Nada Nagy': 'Eng. Nada Nagy',
        'Eng. Eman Selim': 'Eng. Eman Selim',
        'Eng. Yasmina': 'Eng. Yasmina',
        'Eng. Ahmed Daoud': 'Eng. Ahmed Daoud',
        'Eng. Waleed': 'Eng. Waleed',
        'Eng. Dina Atef': 'Eng. Dina Atef',
        'Eng. Basma Eldrandaly': 'Eng. Basma Eldrandaly',
        'Eng. Reham Sheerah': 'Eng. Reham Sheerah',
        'Eng. Kholoud Mohsen': 'Eng. Kholoud Mohsen',
        'Eng. Shawky Elgendy': 'Eng. Shawky Elgendy',
        'Eng. Esraa Elgdawy': 'Eng. Esraa Elgdawy',
        'Eng. Ahmed Abdelmonem': 'Eng. Ahmed Abdelmonem'
    }
};

document.addEventListener('DOMContentLoaded', function() {
    const langToggle = document.getElementById('lang-toggle');
    let currentLang = localStorage.getItem('lang') || 'ar';
    
    function storeOriginalTexts() {
        document.querySelectorAll('[data-translate]').forEach(element => {
            if (!element.getAttribute('data-original')) {
                element.setAttribute('data-original', element.textContent.trim());
            }
        });
    }

    window.storeOriginalTexts = storeOriginalTexts;
    storeOriginalTexts();

    function setLanguage(lang) {
        document.documentElement.setAttribute('lang', lang);
        document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
        
        setTimeout(() => {
            storeOriginalTexts();
            if (lang === 'ar') {
                translateToArabic();
            } else {
                translateToEnglish();
            }
        }, 50);
    }

    window.setLanguage = setLanguage;

    langToggle.addEventListener('click', () => {
        currentLang = currentLang === 'ar' ? 'en' : 'ar';
        localStorage.setItem('lang', currentLang);
        setLanguage(currentLang);
    });

    setLanguage(currentLang);

    window.translateToArabic = function() {
        document.querySelectorAll('[data-translate]').forEach(element => {
            const originalText = element.getAttribute('data-original');
            if (originalText && translations.ar[originalText]) {
                element.textContent = translations.ar[originalText];
            }
        });
    };

    window.translateToEnglish = function() {
        document.querySelectorAll('[data-translate]').forEach(element => {
            const originalText = element.getAttribute('data-original');
            if (originalText) {
                element.textContent = originalText;
            }
        });
    };

    function translateToArabic() {
        document.querySelectorAll('[data-translate]').forEach(element => {
            const originalText = element.getAttribute('data-original');
            if (originalText && translations.ar[originalText]) {
                element.textContent = translations.ar[originalText];
            }
        });
    }

    function translateToEnglish() {
        document.querySelectorAll('[data-translate]').forEach(element => {
            const originalText = element.getAttribute('data-original');
            if (originalText) {
                element.textContent = originalText;
            }
        });
    }

    const fileInput = document.getElementById('summary-file');
    if (fileInput) {
        const updateFileInputText = () => {
            if (!fileInput.files || !fileInput.files[0]) {
                const noFileText = translations.ar['No file chosen'] || 'No file chosen';
                fileInput.setAttribute('data-content', noFileText);
            }
        };
        
        fileInput.addEventListener('change', updateFileInputText);
        updateFileInputText();
    }
});
